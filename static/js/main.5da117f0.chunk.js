(this["webpackJsonpreactjs-shopping-cart"]=this["webpackJsonpreactjs-shopping-cart"]||[]).push([[0],{1554:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),s=c(34),r=c.n(s),o=(c(41),c(4)),i=c(5),d=(c(42),c(43),Object(n.createContext)()),u=(c(44),c(8)),l=c(1),j=function(e){var t=e.cartObj,c=e.removeFromCart;return Object(l.jsxs)("div",{className:"cart-item",children:[Object(l.jsx)("img",{src:t.smallImage,className:"w-36 h-30 ml-0"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"font-medium capitalize",children:t.productName}),Object(l.jsxs)("p",{children:["Quantity: ",t.count]})]}),Object(l.jsxs)("p",{className:"text-green-700 font-medium",children:["\u20b9",t.productPrice]}),Object(l.jsx)("div",{className:"absolute top-2 right-2",children:Object(l.jsx)("button",{onClick:function(){return c(t)},className:"focus:outline-none",children:Object(l.jsx)(u.a,{})})})]})},b="ADD_CART_ITEM",m="REMOVE_CART_ITEM",f="UPDATE_CART_ITEM_COUNT",p=function(e){var t=e.closeCart,c=e.show?"modal display-block":"modal display-none",a=Object(n.useContext)(d),s=a.cartItem,r=a.dispatch,b=Object(n.useState)(0),f=Object(o.a)(b,2),p=f[0],O=f[1],h=Object(n.useState)(0),x=Object(o.a)(h,2),N=x[0],g=x[1];Object(n.useEffect)((function(){!function(){var e=0,t=0;s.map((function(c){e+=c.count*parseFloat(c.productPrice),t+=c.count})),O(e),g(t)}()}),[s]);var v=function(e){e.isAddedtoCart=!1,e.count=0,r({type:m,payload:e})};return Object(l.jsxs)("div",{className:c,children:[Object(l.jsx)("div",{className:"absolute right-3 top-6",children:Object(l.jsx)("button",{onClick:function(){return t()},className:"focus:outline-none",children:Object(l.jsx)(u.a,{className:"w-5 h-5"})})}),Object(l.jsxs)("div",{className:"flex items-center justify-center py-4",children:[Object(l.jsx)(i.a,{className:"w-8 h-8"})," ",Object(l.jsx)("span",{className:"cart-count",children:N}),Object(l.jsx)("h1",{className:"text-lg font-bold ml-2",children:"Cart"})]}),Object(l.jsx)("div",{className:"cart-container",children:s.length>0?Object(l.jsx)("div",{children:s.map((function(e){return Object(l.jsx)(j,{cartObj:e,removeFromCart:v},e.id)}))}):Object(l.jsx)("p",{className:"p-10 text-red-500 decoration-clone font-semibold",children:"Your cart is empty"})}),Object(l.jsxs)("div",{className:"checkout-container",children:[Object(l.jsxs)("div",{className:"flex place-content-between mb-5",children:[Object(l.jsx)("h1",{children:"Total"})," ",Object(l.jsxs)("p",{className:"text-green-700 font-medium items-end text-xl",children:["\u20b9",p]})]}),Object(l.jsx)("button",{className:"checkout-btn btn-green",children:"Checkout"})]})]})},O=c(12),h=c.n(O),x=c(35),N=(c(47),function(e){var t=e.product,c=e.addToCart,a=e.removeFromCart,s=e.incrementItem,r=e.decrementItem,d=Object(n.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1];return Object(n.useEffect)((function(){b(t)}),[t]),Object(l.jsxs)("div",{className:"shadow flex flex-col items-center p-3",children:[Object(l.jsx)("img",{src:j.smallImage,className:"w-64 h-48"}),Object(l.jsx)("p",{className:"font-medium capitalize",children:j.productName}),Object(l.jsxs)("p",{children:["\u20b9",j.productPrice]}),j.isAddedtoCart?Object(l.jsxs)("div",{className:"flex grid-cols-2 gap-2 grid w-4/5",children:[Object(l.jsxs)("div",{className:"flex items-center",children:[Object(l.jsxs)("button",{onClick:function(){return r(j)},disabled:j.count<=1,className:"disabled:opacity-50 disabled:cursor-text focus:outline-none",children:[Object(l.jsx)(i.b,{className:"w-5 h-5"})," "]}),Object(l.jsx)("span",{className:"mx-2",children:j.count}),j.count>=1?Object(l.jsx)("button",{onClick:function(){return s(j)},className:"focus:outline-none",children:Object(l.jsx)(i.c,{className:"w-5 h-5"})}):null]}),Object(l.jsx)("button",{onClick:function(){return a(j)},className:"btn btn-red",children:Object(l.jsx)(i.d,{})})]}):Object(l.jsx)("button",{onClick:function(){return c(j)},className:"btn btn-green",children:"Add to Cart"})]})}),g=c(36),v=c.n(g),C=c(9),y=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useContext)(d),r=s.cartItem,i=s.dispatch,u=function(){var e=Object(x.a)(h.a.mark((function e(){var t,c,n,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://api.pexels.com/v1/search?query=toys&per_page=8&page=1",{headers:{Authorization:"563492ad6f917000010000018f3e254bdba740aab8247cce67fb3648"}});case 2:t=e.sent,c=t.data,n=c.photos,s=n.map((function(e){return{smallImage:e.src.medium,tinyImage:e.src.tiny,productName:C.random.word(),productPrice:C.commerce.price(),count:0,id:C.datatype.uuid()}})),a(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){u()}),[]),Object(n.useEffect)((function(){console.log("cart updated",r,c)}),[r]);var j=function(e){e.isAddedtoCart=!0,e.count=1,i({type:b,payload:e})},p=function(e){e.isAddedtoCart=!1,e.count=0,i({type:m,payload:e})},O=function(e){e.isAddedtoCart=!0,e.count>0&&(e.count=e.count+1);c.findIndex((function(t){return t.id===e.id}));i({type:f,payload:e})},g=function(e){e.isAddedtoCart=!0,e.count>0&&(e.count=e.count-1);c.findIndex((function(t){return t.id===e.id}));i({type:f,payload:e})};return Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"grid lg:grid-cols-4 gap-4 md:grid-cols-3 sm:grid-cols-2 px-4",children:c.map((function(e){return Object(l.jsx)(N,{product:e,addToCart:j,removeFromCart:p,incrementItem:O,decrementItem:g},e.id)}))})})},w=c(10),I=function(e,t){switch(t.type){case b:return[].concat(Object(w.a)(e),[t.payload]);case m:return e.filter((function(e){return e.id!==t.payload.id}));case f:var c=e.findIndex((function(e){return e.id===t.payload.id})),n=[].concat(Object(w.a)(e.slice(0,c)),[Object.assign({},e[c],t.payload)],Object(w.a)(e.slice(c+1)));return console.log("updatedState",n),n;default:return e}};var k=function(){var e=Object(n.useReducer)(I,[]),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)({show:!1}),r=Object(o.a)(s,2),u=r[0],j=r[1],b=Object(n.useState)(0),m=Object(o.a)(b,2),f=m[0],O=m[1];return Object(n.useEffect)((function(){!function(){var e=0;c.map((function(t){e+=t.count})),O(e)}()}),[c]),Object(l.jsxs)(d.Provider,{value:{cartItem:c,dispatch:a},children:[Object(l.jsxs)("header",{className:"p-2 mb-4 border-b-2",children:[Object(l.jsx)("h1",{className:"text-2xl font-bold font-serif",children:"Toy shop"}),Object(l.jsxs)("button",{className:"right-4 top-3 absolute focus:outline-none",onClick:function(){j({show:!0})},children:[Object(l.jsx)(i.a,{className:"w-5 h-5"}),Object(l.jsx)("span",{className:"cart-badge",children:f})]})]}),Object(l.jsx)(y,{}),Object(l.jsx)(p,{closeCart:function(){j({show:!1})},show:u.show})]})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1555)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root")),T()},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},47:function(e,t,c){}},[[1554,1,2]]]);
//# sourceMappingURL=main.5da117f0.chunk.js.map