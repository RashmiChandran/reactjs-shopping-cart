(this["webpackJsonpreactjs-shopping-cart"]=this["webpackJsonpreactjs-shopping-cart"]||[]).push([[0],{1558:function(e,t,c){},1565:function(e,t,c){"use strict";c.r(t);var n=c(2),s=c.n(n),a=c(37),r=c.n(a),o=(c(45),c(4)),i=c(5),d=(c(46),c(47),Object(n.createContext)()),u=(c(48),c(9)),l=c(1),j=function(e){var t=e.cartObj,c=e.removeFromCart;return Object(l.jsxs)("div",{className:"cart-item",children:[Object(l.jsx)("img",{src:t.smallImage,className:"w-36 h-30 ml-0"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"font-medium capitalize",children:t.productName}),Object(l.jsxs)("p",{children:["Quantity: ",t.count]})]}),Object(l.jsxs)("p",{className:"text-green-700 font-medium",children:["\u20b9",t.productPrice]}),Object(l.jsx)("div",{className:"absolute top-2 right-2",children:Object(l.jsx)("button",{onClick:function(){return c(t)},className:"focus:outline-none",children:Object(l.jsx)(u.a,{})})})]})},b="ADD_CART_ITEM",p="REMOVE_CART_ITEM",m="UPDATE_CART_ITEM_COUNT",h=function(e){var t=e.closeCart,c=e.show?"modal display-block":"modal display-none",s=Object(n.useContext)(d),a=s.cartItem,r=s.dispatch,b=Object(n.useState)(0),m=Object(o.a)(b,2),h=m[0],O=m[1],f=Object(n.useState)(0),x=Object(o.a)(f,2),v=x[0],g=x[1];Object(n.useEffect)((function(){!function(){var e=0,t=0;a.map((function(c){e+=c.count*parseFloat(c.productPrice),t+=c.count})),O(e),g(t)}()}),[a]);var N=function(e){e.isAddedtoCart=!1,e.count=0,r({type:p,payload:e})};return Object(l.jsxs)("div",{className:c,children:[Object(l.jsx)("div",{className:"absolute right-3 top-6",children:Object(l.jsx)("button",{onClick:function(){return t()},className:"focus:outline-none",children:Object(l.jsx)(u.a,{className:"w-5 h-5"})})}),Object(l.jsxs)("div",{className:"flex items-center justify-center py-4",children:[Object(l.jsx)(i.a,{className:"w-8 h-8"})," ",Object(l.jsx)("span",{className:"cart-count",children:v}),Object(l.jsx)("h1",{className:"text-lg font-bold ml-2",children:"Cart"})]}),Object(l.jsx)("div",{className:"cart-container",children:a.length>0?Object(l.jsx)("div",{children:a.map((function(e){return Object(l.jsx)(j,{cartObj:e,removeFromCart:N},e.id)}))}):Object(l.jsx)("p",{className:"p-10 text-red-500 decoration-clone font-semibold",children:"Your cart is empty"})}),Object(l.jsxs)("div",{className:"checkout-container",children:[Object(l.jsxs)("div",{className:"flex place-content-between mb-5",children:[Object(l.jsx)("h1",{children:"Total"})," ",Object(l.jsxs)("p",{className:"text-green-700 font-medium items-end text-xl",children:["\u20b9",h]})]}),Object(l.jsx)("button",{className:"checkout-btn btn-green",onClick:function(){alert("Checkout: Subtotal \u20b9"+h)},children:"Checkout"})]})]})},O=c(13),f=c.n(O),x=c(38),v=(c(51),function(e){var t=e.product,c=e.addToCart,s=e.removeFromCart,a=e.incrementItem,r=e.decrementItem,d=Object(n.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1];return Object(n.useEffect)((function(){b(t)}),[t]),Object(l.jsxs)("div",{className:"shadow flex flex-col items-center p-3",children:[Object(l.jsx)("img",{src:j.smallImage,className:"w-64 h-48"}),Object(l.jsx)("p",{className:"font-medium capitalize",children:j.productName}),Object(l.jsxs)("p",{children:["\u20b9",j.productPrice]}),j.isAddedtoCart?Object(l.jsxs)("div",{className:"flex grid-cols-2 gap-2 grid w-4/5",children:[Object(l.jsxs)("div",{className:"flex items-center",children:[Object(l.jsxs)("button",{onClick:function(){return r(j)},disabled:j.count<=1,className:"disabled:opacity-50 disabled:cursor-text focus:outline-none",children:[Object(l.jsx)(i.b,{className:"w-5 h-5"})," "]}),Object(l.jsx)("span",{className:"mx-2",children:j.count}),j.count>=1?Object(l.jsx)("button",{onClick:function(){return a(j)},className:"focus:outline-none",children:Object(l.jsx)(i.c,{className:"w-5 h-5"})}):null]}),Object(l.jsx)("button",{onClick:function(){return s(j)},className:"btn btn-red",children:Object(l.jsx)(i.d,{})})]}):Object(l.jsx)("button",{onClick:function(){return c(j)},className:"btn btn-green",children:"Add to Cart"})]})}),g=Object(n.createContext)(),N=c(7),C=c(39),y=c.n(C),w="FETCH_PRODUCTS",I=c(40),P=c.n(I),k=(c(1558),function(){var e=Object(n.useContext)(d),t=e.cartItem,c=e.dispatch,s=Object(n.useContext)(g),a=s.products,r=s.productDispatch,o=function(){var e=Object(x.a)(f.a.mark((function e(){var t,c,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("https://api.pexels.com/v1/search?query=toys&per_page=8&page=1",{headers:{Authorization:"563492ad6f917000010000018f3e254bdba740aab8247cce67fb3648"}});case 2:t=e.sent,c=t.data,n=c.photos,s=n.map((function(e){return{smallImage:e.src.medium,tinyImage:e.src.tiny,productName:N.random.word(),productPrice:N.commerce.price(),count:0,id:N.datatype.uuid(),age:N.datatype.number(6)}})),r({type:w,payload:s});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){o()}),[]),Object(n.useEffect)((function(){console.log("Cart item updated")}),[t]);var i=function(e){e.isAddedtoCart=!0,e.count=1,c({type:b,payload:e})},u=function(e){e.isAddedtoCart=!1,e.count=0,c({type:p,payload:e})},j=function(e){e.isAddedtoCart=!0,e.count>0&&(e.count=e.count+1),c({type:m,payload:e})},h=function(e){e.isAddedtoCart=!0,e.count>0&&(e.count=e.count-1),c({type:m,payload:e})};return Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"grid lg:grid-cols-4 gap-4 md:grid-cols-3 sm:grid-cols-2 px-4",children:void 0!==a.items?a.items.map((function(e){return Object(l.jsx)(v,{product:e,addToCart:i,removeFromCart:u,incrementItem:j,decrementItem:h},e.id)})):Object(l.jsx)("div",{className:"spinner-container",children:Object(l.jsx)(P.a,{color:"#10b981"})})})})}),T=c(10),A=function(e,t){switch(t.type){case b:return[].concat(Object(T.a)(e),[t.payload]);case p:return e.filter((function(e){return e.id!==t.payload.id}));case m:var c=e.findIndex((function(e){return e.id===t.payload.id}));return[].concat(Object(T.a)(e.slice(0,c)),[Object.assign(e[c],t.payload)],Object(T.a)(e.slice(c+1)));default:return e}},E=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useContext)(g),r=a.products,i=a.productDispatch,d={lowestprice:function(e,t){return parseInt(e.productPrice)<parseInt(t.productPrice)?-1:parseInt(e.productPrice)>parseInt(t.productPrice)?1:0},highestprice:function(e,t){return parseInt(e.productPrice)>parseInt(t.productPrice)?-1:parseInt(e.productPrice)<parseInt(t.productPrice)?1:0}};return Object(l.jsxs)("div",{className:"mr-10 mb-5",children:[Object(l.jsx)("label",{children:"Sort by:"}),Object(l.jsxs)("select",{value:c,onChange:function(e){return t=e,r.items.sort(d[t.target.value]),s(t.target.value),void i({type:w,payload:r.items});var t},className:"border ml-2 p-2",children:[Object(l.jsx)("option",{value:"1",disabled:!0,selected:!0,children:"Select"}),Object(l.jsx)("option",{value:"lowestprice",children:"Lowest to Highest"}),Object(l.jsx)("option",{value:"highestprice",children:"Highest to Lowest"})]})]})},S=c(14),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(S.a)(Object(S.a)({},e),{},{items:t.payload});default:return e}};var _=function(){var e=Object(n.useReducer)(A,[]),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useReducer)(F,[]),r=Object(o.a)(a,2),u=r[0],j=r[1],b=Object(n.useState)({show:!1}),p=Object(o.a)(b,2),m=p[0],O=p[1],f=Object(n.useState)(0),x=Object(o.a)(f,2),v=x[0],N=x[1];return Object(n.useEffect)((function(){!function(){var e=0;c.map((function(t){e+=t.count})),N(e)}()}),[c]),Object(l.jsx)(g.Provider,{value:{products:u,productDispatch:j},children:Object(l.jsxs)(d.Provider,{value:{cartItem:c,dispatch:s},children:[Object(l.jsxs)("header",{className:"p-2 mb-4 border-b-2",children:[Object(l.jsx)("h1",{className:"text-2xl font-bold font-serif",children:"Toy shop"}),Object(l.jsxs)("button",{className:"right-4 top-3 absolute focus:outline-none",onClick:function(){O({show:!0})},children:[Object(l.jsx)(i.a,{className:"w-5 h-5"}),Object(l.jsx)("span",{className:"cart-badge",children:v})]})]}),Object(l.jsx)("div",{className:"product-filter",children:Object(l.jsx)(E,{})}),Object(l.jsx)(k,{}),Object(l.jsx)(h,{closeCart:function(){O({show:!1})},show:m.show})]})})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1567)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(_,{})}),document.getElementById("root")),D()},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},51:function(e,t,c){}},[[1565,1,2]]]);
//# sourceMappingURL=main.5090fc24.chunk.js.map